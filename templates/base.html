<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{% block title %}ScholarMatch{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />

  <style>
    :root {
      --primary: #593632;
      --primary-hover: #45282a;
      --secondary: #fdf6f3;
    }
    .page-bg {
  background: linear-gradient(135deg, #593832, #8c5d53); /* default background for all pages */
}
    /* Navbar link underline animation */
    .nav-link {
      position: relative;
      transition: color 0.3s ease;
    }
    .nav-link::after {
      content: "";
      position: absolute;
      bottom: -6px;
      left: 0;
      width: 0%;
      height: 2px;
      background-color: var(--primary);
      transition: width 0.3s ease;
    }
    .nav-link:hover::after {
      width: 100%;
    }

    /* Dropdown fade */
    .fade-enter {
      opacity: 0;
      transform: translateY(-10px);
      transition: opacity 0.25s ease, transform 0.25s ease;
    }
    .fade-enter-active {
      opacity: 1;
      transform: translateY(0);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-white via-gray-50 to-gray-100 text-gray-800 font-sans min-h-screen flex flex-col">

  <!-- Navbar -->
  <nav class="bg-white/95 backdrop-blur-md shadow-md fixed top-0 left-0 right-0 z-20 border-b border-gray-200">
    <div class="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center">
      
      <!-- Logo -->
      <a href="{{ url_for('home') if session.get('user_email') else url_for('index') }}" 
         class="text-2xl font-extrabold"
         style="color: var(--primary);">
        ðŸŽ“ ScholarMatch
      </a>

      <!-- Desktop Menu -->
      <div class="hidden md:flex items-center space-x-8 font-medium">
        {% if session.get('user_email') %}
          <a href="{{ url_for('home') }}" class="nav-link hover:text-[var(--primary)] transition">Home</a>
          <a href="{{ url_for('form') }}" class="nav-link hover:text-[var(--primary)] transition">Find Scholarships</a>
          <a href="{{ url_for('dashboard') }}" class="nav-link hover:text-[var(--primary)] transition">Dashboard</a>

          <!-- User dropdown -->
          <div class="relative">
            <button id="userBtn" 
              class="px-4 py-2 rounded-lg border border-gray-300 bg-gray-50 hover:bg-gray-100 transition">
              {{ session.get('user_email') }}
            </button>
            <div id="userMenu" 
              class="hidden absolute right-0 mt-2 w-52 bg-white border rounded-lg shadow-lg fade-enter z-30">
              <a href="{{ url_for('form') }}" class="block px-4 py-2 hover:bg-gray-50">Profile</a>
              <a href="{{ url_for('dashboard') }}" class="block px-4 py-2 hover:bg-gray-50">Dashboard</a>
              <a href="{{ url_for('logout') }}" class="block px-4 py-2 text-red-600 hover:bg-red-50">Logout</a>
            </div>
          </div>
        {% else %}
          <a href="{{ url_for('login') }}" 
             class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition">
             Log in
          </a>
          <a href="{{ url_for('signup') }}" 
             class="px-4 py-2 font-semibold rounded-lg shadow transition text-white"
             style="background-color: var(--primary);">
             Sign up
          </a>
        {% endif %}
      </div>

      <!-- Mobile Hamburger -->
      <div class="md:hidden">
        <button id="menuBtn" class="focus:outline-none">
          <svg class="w-7 h-7 text-gray-700" fill="none" stroke="currentColor" stroke-width="2" 
               viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" 
                  d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="hidden md:hidden bg-white border-t shadow-md">
      <div class="flex flex-col p-4 space-y-3 font-medium">
        {% if session.get('user_email') %}
          <a href="{{ url_for('home') }}" class="hover:text-[var(--primary)] transition">Home</a>
          <a href="{{ url_for('form') }}" class="hover:text-[var(--primary)] transition">Find Scholarships</a>
          <a href="{{ url_for('dashboard') }}" class="hover:text-[var(--primary)] transition">Dashboard</a>
          <a href="{{ url_for('logout') }}" class="text-red-600 hover:text-red-700">Logout</a>
        {% else %}
          <a href="{{ url_for('login') }}" class="hover:text-[var(--primary)] transition">Log in</a>
          <a href="{{ url_for('signup') }}" class="hover:text-[var(--primary)] transition">Sign up</a>
        {% endif %}
      </div>
    </div>
  </nav>

  <!-- Flash Messages -->
  <div class="max-w-3xl mx-auto px-4">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, msg in messages %}
          <div class="px-4 py-3 rounded-lg mb-3 text-sm font-medium shadow-sm 
            {{ 'bg-red-100 text-red-800 border border-red-200' if category == 'error' 
            else 'bg-green-100 text-green-800 border border-green-200' }}">
            {{ msg }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}
  </div>

  <!-- Page Content -->
  <main class="flex-grow max-w-6xl mx-auto px-4 pt-16">
  {% block content %}{% endblock %}
</main>


  <!-- Footer -->
  <footer class="bg-white/95 backdrop-blur-md border-t mt-8 py-6 text-center text-gray-600 text-sm">
    <div class="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center">
      <p>&copy; {{ 2025 }} ScholarMatch. All rights reserved.</p>
      <div class="space-x-6 mt-3 md:mt-0">
        <a href="#" class="hover:text-[var(--primary)] transition">About</a>
        <a href="#" class="hover:text-[var(--primary)] transition">Contact</a>
        <a href="#" class="hover:text-[var(--primary)] transition">Terms</a>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    // User dropdown
    const btn = document.getElementById("userBtn");
    const menu = document.getElementById("userMenu");
    if (btn) {
      btn.addEventListener("click", () => {
        menu.classList.toggle("hidden");
        menu.classList.add("fade-enter-active");
      });
      window.addEventListener("click", (e) => {
        if (!btn.contains(e.target) && !menu.contains(e.target)) {
          menu.classList.add("hidden");
        }
      });
    }

    // Mobile menu toggle
    const menuBtn = document.getElementById("menuBtn");
    const mobileMenu = document.getElementById("mobileMenu");
    menuBtn.addEventListener("click", () => {
      mobileMenu.classList.toggle("hidden");
    });
  </script>
</body>
</html>
