{% extends "base.html" %}
{% block title %}ScholarMatch ‚Äì Student Profile{% endblock %}

{% block content %}

<style>
  /* Page Background */
  body {
    background: linear-gradient(135deg, #593832, #8c5d53);
    font-family: 'Segoe UI', sans-serif;
    padding-top: 80px; /* avoid navbar overlap */
    color: #fff;
  }

  /* Card Container */
  .card {
    background: #fff;
    border-radius: 20px;
    padding: 2.5rem;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    animation: fadeInUp 0.8s ease-in-out;
    color: #593832;
  }

  /* Gradient Text for Headings */
  .text-gradient {
    display: inline-block;
    background: linear-gradient(to right, #593832, #a97164, #e0b7a0);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    color: transparent;
  }

  /* Inputs & Selects */
  select, input {
    width: 100%;
    border: 1px solid #593832;
    border-radius: 10px;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    transition: all 0.3s ease-in-out;
  }

  select:focus, input:focus {
    transform: scale(1.02);
    border-color: #8b5e50;
    box-shadow: 0 0 8px rgba(147, 86, 71, 0.5);
    outline: none;
  }

  /* Buttons & Links */
  button, a {
    transition: all 0.3s ease-in-out;
    cursor: pointer;
    font-weight: 600;
  }

  button:hover, a:hover {
    transform: scale(1.05);
    opacity: 0.9;
  }

  /* Gradient Buttons */
  .btn-gradient {
    background: linear-gradient(to right, #593832, #a97164);
    color: #fff;
    padding: 0.75rem 1.5rem;
    border-radius: 12px;
    border: none;
    font-size: 1rem;
  }

  /* Readonly Inputs */
  .readonly {
    background-color: #f3eaea;
    opacity: 0.8;
    cursor: not-allowed;
  }

  /* Section Animations */
  @keyframes fadeInUp {
    from {opacity: 0; transform: translateY(20px);}
    to {opacity: 1; transform: translateY(0);}
  }
</style>

<div class="card w-full max-w-3xl mx-auto">
  <div class="flex items-center justify-between mb-8">
    <h2 class="text-3xl font-extrabold text-gradient">üéì ScholarMatch Profile</h2>

    {% if profile and readonly %}
      <a href="{{ url_for('profile_edit') }}" class="px-4 py-2 border rounded-lg hover:bg-orange-100 transition duration-200">
        ‚úèÔ∏è Edit
      </a>
    {% endif %}
  </div>

  <form method="POST" action="{{ url_for('submit_profile') }}" class="space-y-6">

    {% set ro = 'readonly disabled readonly cursor-not-allowed' if readonly else '' %}

    <!-- Gender -->
    <div>
      <label class="block font-semibold mb-2">Gender</label>
      <select name="gender" required class="{{ ro }}">
        <option value="">Select</option>
        {% for g in ['Male','Female','Other'] %}
          <option {{ 'selected' if profile and profile.get('gender')==g else '' }}>{{ g }}</option>
        {% endfor %}
      </select>
    </div>

    <!-- Education -->
    <div>
      <label class="block font-semibold mb-2">Education Level</label>
      <select name="education" required class="{{ ro }}">
        <option value="">Select</option>
        {% for e in ['5th','6th','7th','8th','9th','10th','12th','UG','PG'] %}
          <option {{ 'selected' if profile and profile.get('education')==e else '' }}>{{ e }}</option>
        {% endfor %}
      </select>
    </div>

    <!-- Category -->
    <div>
      <label class="block font-semibold mb-2">Caste / Category</label>
      <select name="category" required class="{{ ro }}">
        <option value="">Select</option>
        {% for c in ['GEN','OBC','SC','ST','EWS','Minority'] %}
          <option {{ 'selected' if profile and profile.get('category')==c else '' }}>{{ c }}</option>
        {% endfor %}
      </select>
    </div>

    <!-- Income -->
    <div>
      <label class="block font-semibold mb-2">Annual Family Income (‚Çπ)</label>
      <input type="number" name="income" required class="{{ ro }}"
             value="{{ profile.get('income') if profile else '' }}" placeholder="e.g., 250000">
    </div>

    <!-- State -->
    <div>
      <label class="block font-semibold mb-2">State</label>
      <input type="text" name="state" required class="{{ ro }}"
             value="{{ profile.get('state') if profile else '' }}" placeholder="e.g., Andhra Pradesh">
    </div>

    <!-- Date of Birth -->
    <div>
      <label class="block font-semibold mb-2">Date of Birth</label>
      <input type="date" name="dob" required class="{{ ro }}"
             value="{{ profile.get('dob') if profile else '' }}">
    </div>

    <!-- Religion -->
    <div>
      <label class="block font-semibold mb-2">Religion</label>
      <select name="religion" required class="{{ ro }}">
        <option value="">Select</option>
        {% for r in ['Hindu','Muslim','Christian','Sikh','Jain','Buddhist','Parsi','Other'] %}
          <option {{ 'selected' if profile and profile.get('religion')==r else '' }}>{{ r }}</option>
        {% endfor %}
      </select>
    </div>

    <!-- Disability -->
    <div>
      <label class="block font-semibold mb-2">Are you differently abled?</label>
      <select name="disability" required class="{{ ro }}">
        <option value="">Select</option>
        {% for d in ['Yes','No'] %}
          <option {{ 'selected' if profile and profile.get('disability')==d else '' }}>{{ d }}</option>
        {% endfor %}
      </select>
    </div>

    <!-- Course / Stream -->
    <div>
      <label class="block font-semibold mb-2">Course / Stream</label>
      <input type="text" name="course" class="{{ ro }}"
             value="{{ profile.get('course') if profile else '' }}" placeholder="e.g., B.Tech, Arts, MBBS">
    </div>

    <!-- Marks / Percentage -->
    <div>
      <label class="block font-semibold mb-2">Percentage / Marks (%)</label>
      <input type="number" name="percentage" min="0" max="100" class="{{ ro }}"
             value="{{ profile.get('percentage') if profile else '' }}" placeholder="e.g., 85">
    </div>

    <!-- Submit -->
    <div class="text-center mt-8">
      {% if readonly %}
        <a href="{{ url_for('profile_edit') }}" class="px-6 py-3 border rounded-lg hover:bg-orange-100 transition">Edit Profile</a>
        <a href="{{ url_for('results') }}" class="ml-4 btn-gradient">
          View Matches
        </a>
      {% else %}
        <button type="submit" class="btn-gradient">
          Save & Find Scholarships
        </button>
      {% endif %}
    </div>

  </form>
</div>

{% endblock %}
